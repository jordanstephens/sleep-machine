{"version":3,"sources":["components/WeightedGraph/util.ts","components/ProgressMeter.tsx","components/icons/Triangle.tsx","components/icons/Square.tsx","components/PlayPauseButton.tsx","lib/graph.ts","components/Draggable.tsx","components/WeightedGraph/Edge.tsx","components/WeightedGraph/Node.tsx","components/WeightedGraph/Label.tsx","components/WeightedGraph/Point.tsx","components/WeightedGraph/index.tsx","components/MarkovChart.tsx","components/Slider.tsx","components/icons/Circle.tsx","components/icons/Sawtooth.tsx","components/RadioButtons.tsx","components/Controls.tsx","lib/machine.ts","components/SleepMachine.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["NOOP","Math","PI","rel2abs","value","SIZE","ProgressMeter","beat","viewBox","className","map","position","i","key","classnames","on","x","HALF","y","height","width","Triangle","props","points","Square","PlayPauseButton","playing","onClick","style","transform","rmap","src","dst","Error","smin","smax","dmin","dmax","normalize_proportions","values","length","sum","_","v","Edge","a","b","this","other","Graph","weights","radius","vertices","theta","order","sin","cos","max","normalize_absolute","Array","fill","chain","v1","v2","flatten","compact","uniqBy","sort","join","DraggableContext","React","createContext","Draggable","id","enabled","children","Consumer","context","onMouseDown","event","clientX","clientY","setOrigin","DraggableProvider","onMouseMove","handleDrag","onMouseUp","committed","onDrag","origin","state","destination","delta","setState","document","addEventListener","removeEventListener","Provider","Component","point_at_distance","x0","y0","slope","distance","Infinity","partial","sqrt","pow","point_radius","p1","p2","weight","selected","x1","y1","x2","y2","m","dx","sign","POINT_RADIUS","d1","d2","x1a","y1a","endpoints","min","midpoint_x","midpoint_y","rect_x","rect_w","rect_y","rect_h","strokeLinecap","markerEnd","fontSize","cursor","userSelect","dominantBaseline","textAnchor","toFixed","Node","point","cx","cy","r","Label","offset","size","text","Point","config","label","label_offset","label_size","DEFAULT_CONFIG","graph_radius","WeightedGraph","labels","onVertexClick","onWeightDrag","selected1","selected2","_config","graph","G","chart","active_weights","normalized_weights","refX","refY","markerWidth","markerHeight","orient","d","transformOrigin","edges","String","MarkovChart","current","next","onChange","meter","v0","abs","normalizedWeights","useState","cloneDeep","editWeights","setEditWeights","setSelected","handleVertexClick","index","fade","parseInt","values_0","values_1","forEach","pivot_0","pivot_1","rem_0","value_0","error","console","Slider","dragging","setDragging","setValues","onDragStart","onDragEnd","Circle","Sawtooth","RadioButtons","name","options","title","_value","type","checked","htmlFor","BG_COLOR","WAVEFORM_OPTIONS","DELAY_TIME_OPTIONS","Controls","params","waveform","axis","attack","ymin","ymax","ystep","styles","active","background","track","decay","sustain","release","delay_feedback","xmin","xmax","xstep","delay_wet","borderRadius","delay_time","chorus_frequency","chorus_depth","Tone","require","DEFAULT_PARAMS","tempo","chorus_delay_time","MAJOR_TRIAD","MINOR_TRIAD","SCALE_DEGREE_TRIADS","ROOT_OFFSETS","rand","floor","random","Machine","probabilities","generators","pattern","range","synth","updateParams","_params","Transport","bpm","update","Synth","ChordPattern","updateProbabilities","latencyHint","loop","loopStart","loopEnd","scheduleRepeat","t","Draw","schedule","emit","split","notes","note","trigger","col","VoseAliasMethod","start","stop","toggle","voice","get","oscillator","envelope","delay","wet","Time","delayTime","toNotation","feedback","chorus","frequency","depth","EventEmitter","root","degrees","shifts","Frequency","toNote","PingPongDelay","Chorus","PolySynth","set","Master","velocity","triggerAttackRelease","undefined","LABELS","machine","KEYCODE","SleepMachine","started","setStarted","_setPlaying","setBeat","setCurrent","setNext","useEffect","useMachine","setPlaying","handlePlayPause","machineState","handleKeyDown","activeElement","classList","contains","keyCode","target","marginBottom","App","Boolean","window","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","message"],"mappings":"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","file":"static/js/main.cee7b8ca.chunk.js","sourcesContent":["export const SIZE = 100;\nexport const HALF = SIZE / 2;\nexport const CIRCUMFERENCE = 2 * Math.PI * HALF;\nexport const POINT_RADIUS = 5;\nexport const NOOP = () => {};\n\nexport const rel2abs = (value: number) => HALF + value;\n\nexport interface IConfig {\n  point_radius: number;\n  label_offset: number;\n  label_size: number;\n  graph_radius: number;\n}\n\nexport function generateConfig(point_radius: number, graph_radius: number): IConfig {\n  return {\n    point_radius,\n    label_offset: point_radius * 2,\n    label_size: point_radius * 0.8,\n    graph_radius\n  }\n}\n","\nimport React from 'react';\nimport classnames from 'classnames';\n\nimport { SIZE, HALF } from './WeightedGraph/util'\ninterface IProgressMeterProps {\n  beat: number;\n}\n\nconst PADDING = 4;\n\nconst ProgressMeter: React.FC<IProgressMeterProps> = ({ beat }) => (\n  <svg viewBox={`0 0 ${SIZE} ${SIZE}`} className=\"ProgressMeter\">\n    {[0, 1, 3, 2].map((position, i) => (\n      <rect\n        key={position}\n        className={classnames({\n          on: beat === position\n        })}\n        x={i % 2 === 0 ? 0 : HALF + (PADDING / 2)}\n        y={i < 2 ? 0 : HALF + (PADDING / 2)}\n        height={HALF - (PADDING / 2)}\n        width={HALF - (PADDING / 2)}\n      />\n    ))}\n  </svg>\n);\n\nexport default ProgressMeter;\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { SIZE, HALF } from '../WeightedGraph/util'\n\ninterface IProps {\n  className?: string;\n  style?: object;\n}\n\nconst Triangle: React.FC<IProps> = ({ className, ...props }) => (\n  <svg viewBox={`0 0 ${SIZE} ${SIZE}`} className={classnames('Triangle', className)} {...props}>\n    <polygon points={`0,${SIZE} ${HALF},0 ${SIZE}, ${SIZE}`} />\n  </svg>\n);\n\nexport default Triangle;\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { SIZE } from '../WeightedGraph/util'\n\ninterface IProps {\n  className?: string;\n}\n\nconst Square: React.FC<IProps> = ({ className }) => (\n  <svg viewBox={`0 0 ${SIZE} ${SIZE}`} className={classnames('Square', className)}>\n    <rect x={0} y={0} height={SIZE} width={SIZE} />\n  </svg>\n);\n\nexport default Square;\n","import React from 'react';\nimport Triangle from './icons/Triangle';\nimport Square from './icons/Square';\n\ninterface IProps {\n  playing: boolean;\n  onClick: (event: React.MouseEvent) => void\n}\n\nconst PlayPauseButton: React.FC<IProps> = ({ playing, onClick }) => (\n  <button onClick={onClick} className=\"PlayPauseButton\">\n    {playing\n      ? <Square />\n      : <Triangle style={{ transform: 'rotate(90deg)' }} />\n    }\n  </button>\n)\n\nexport default PlayPauseButton\n","import _ from 'lodash'\n\nexport const deg2rad = (deg: number) => (deg * Math.PI) / 180;\n\nexport type Vertex = number;\nexport type Point = [number, number, number];\nexport type Chart = Point[];\nexport type Vector = number[];\nexport type Matrix = Vector[];\n\nexport type Range = [number, number];\nexport function rmap(value: number, src: Range, dst: Range): number{\n  if (value == null) throw new Error('Invalid value');\n  const [smin, smax] = src;\n  const [dmin, dmax] = dst;\n  if (smin >= smax) throw new Error(`Invalid src Range: [${smin}, ${smax}]`);\n  if (dmin >= dmax) throw new Error(`Invalid dst Range: [${dmin}, ${dmax}]`);\n  return (value - smin) * (dmax - dmin) / (smax - smin) + dmin;\n}\n\nexport function normalize_proportions(values: Vector = []) {\n  if (!values.length) return [];\n  const sum = _.sum(values);\n  if (sum === 0) return values.map((v) => 0);\n  const src: Range = [0, sum];\n  const dst: Range = [0, 1];\n  return values.map((value) => rmap(value, src, dst));\n}\nexport function normalize_absolute(values: Vector = []) {\n  if (!values.length) return [];\n  const max = Math.max(...values)\n  const src: Range = [0, max === 0 ? 1 : max];\n  const dst: Range = [0, 1];\n  return values.map((value) => rmap(value, src, dst));\n}\n\nconst EPSILON = 0.00005;\nexport function redistribute(values: Vector, index: number, delta: number) {\n  if (index > values.length - 1) throw new Error('index out of bounds');\n  if (delta < -1 || delta > 1) throw new Error('delta out of bounds');\n  if (values.length < 2) throw new Error('vector length must be greater than 1');\n  values.forEach((value) => {\n    if (value < 0 || value > 1) {\n      throw new Error('vector not normalized: value out of bounds');\n    }\n  })\n  const sum = _.sum(values);\n  if (sum < 1 - EPSILON || sum > 1 + EPSILON) {\n    throw new Error(`vector not normalized: proportions sum to ${sum}`);\n  }\n  const pivot_0 = values[index];\n  const pivot_1 = pivot_0 + delta;\n  if (pivot_1 < 0 || pivot_1 > 1) {\n    throw new Error('delta effect out of bounds');\n  }\n  const rem_0 = sum - pivot_0;\n  const rem_1 = sum - pivot_1;\n  // if rem_0 is zero, that means that the pivot was 100% of the value and the the differences needs to be equally distributed among the rest of the values\n  if (rem_0 === 0) {\n    // split the remainder up between each value except the pivot\n    const value = rem_1 / (values.length - 1)\n    return values.map((value_0, i) => (i === index) ? pivot_1 : value);\n  }\n  return values.map((value_0, i) => {\n    if (i === index) return pivot_1;\n    return value_0 + (-1 * delta * (value_0 / rem_0))\n  })\n}\n\nexport class Edge {\n  a: Vertex;\n  b: Vertex;\n\n  constructor(a: Vertex, b: Vertex) {\n    this.a = a;\n    this.b = b;\n  }\n\n  equals(other: Edge) {\n    return (this.a === other.a && this.b === other.b)\n      || (this.a === other.b && this.b === other.a);\n  }\n\n  includes(x: Vertex) {\n    return x === this.a || x === this.b;\n  }\n}\n\nexport class Graph {\n  weights: number[];\n  constructor(weights: number[]) {\n    this.weights = weights;\n  }\n\n  get order(): number {\n    return this.weights.length;\n  }\n\n  get normalized_weights(): number[] {\n    return normalize_absolute(this.weights);\n  }\n\n  get vertices(): Vertex[] {\n    return new Array(this.order).fill(0).map((x, i) => i)\n  }\n\n  get edges(): Edge[] {\n    return _.chain(this.vertices)\n      .map((v1) => this.vertices.map((v2) => v1 !== v2 && new Edge(v1, v2)))\n      .flatten()\n      .compact()\n      .uniqBy(({ a, b }) => [a, b].sort().join(':'))\n      .value();\n  }\n\n  chart(radius: number): Chart {\n    return this.vertices.map((i) => {\n      const theta = deg2rad((360 / this.order) * i);\n      const x = radius * Math.sin(theta);\n      const y = -1 * radius * Math.cos(theta);\n      return [x, y, theta];\n    })\n  }\n}\n\n","import React, { Fragment } from 'react';\n\ntype MousePosition = { x: number, y: number };\ntype DragOrigin = { id: string } & MousePosition;\nexport type DragEvent = {\n  id: string;\n  origin: MousePosition;\n  destination: MousePosition;\n  delta: MousePosition;\n  committed: boolean;\n}\n\ninterface IDraggableContext {\n  setOrigin: (origin: DragOrigin | null) => void;\n  origin: MousePosition | null;\n}\nconst DraggableContext = React.createContext<IDraggableContext | null>(null);\n\ninterface IDraggableProps {\n  id: string;\n  enabled: boolean;\n  children: React.ReactNode;\n}\n\nexport const Draggable: React.FC<IDraggableProps> = ({ id, enabled, children }) => {\n  if (!enabled) return <Fragment>{children}</Fragment>;\n  return (\n    <DraggableContext.Consumer>\n      {(context) => {\n        if (!context) throw new Error('Invariant violation: DraggableContext.Consumer rendered without a context');\n        function handleMouseDown(event: React.MouseEvent) {\n          const { clientX: x, clientY: y } = event;\n          context!.setOrigin({ id, x, y });\n        }\n        return (\n          <g onMouseDown={handleMouseDown}>\n            {children}\n          </g>\n        )\n      }}\n    </DraggableContext.Consumer>\n  );\n}\n\ninterface IDraggableProviderProps {\n  onDrag?: (event: DragEvent) => void;\n  children: React.ReactNode;\n}\n\ninterface IDraggableProviderState {\n  origin: DragOrigin | null;\n}\n\nexport class DraggableProvider extends React.Component<IDraggableProviderProps, IDraggableProviderState> {\n  constructor(props: IDraggableProviderProps) {\n    super(props);\n    this.state = {\n      origin: null\n    };\n  }\n\n  componentDidMount() {\n    if (!this.props.onDrag) return;\n    document.addEventListener('mouseup', this.onMouseUp);\n    document.addEventListener('mousemove', this.onMouseMove);\n  }\n\n  componentWillUnmount() {\n    if (!this.props.onDrag) return;\n    document.removeEventListener('mouseup', this.onMouseUp);\n    document.removeEventListener('mousemove', this.onMouseMove);\n  }\n\n  onMouseMove = (event: MouseEvent) => {\n    this.handleDrag(false, event);\n  }\n\n  onMouseUp = (event: MouseEvent) => {\n    this.handleDrag(true, event);\n  }\n\n  handleDrag = (committed: boolean, event: MouseEvent) => {\n    const { onDrag } = this.props;\n    if (!onDrag) return;\n    const { origin } = this.state;\n    if (!origin) return;\n    const { id } = origin;\n    const destination = { x: event.clientX, y: event.clientY };\n    const delta = {\n      x: destination.x - origin.x,\n      y: destination.y - origin.y\n    };\n    onDrag({ id, origin, delta, destination, committed });\n    if (committed) {\n      this.setState({ origin: null });\n    }\n  }\n\n  render() {\n    const { children, onDrag } = this.props;\n    if (!onDrag) return children;\n\n    const { origin } = this.state;\n    const setOrigin = (origin: DragOrigin | null) => this.setState({ origin });\n    return (\n      <DraggableContext.Provider value={{ origin, setOrigin }}>\n        {children}\n      </DraggableContext.Provider>\n    );\n  }\n}\n","import React from 'react';\nimport classnames from 'classnames'\nimport { rel2abs, POINT_RADIUS } from './util';\nimport * as G from '../../lib/graph';\nimport { Draggable } from '../Draggable';\n\nfunction format_weight(value: number): string {\n  return `${(value * 100).toFixed(0)}%`;\n}\n\nfunction slope(x1: number, y1: number, x2: number, y2: number): number {\n  const dx = x2 - x1\n  if (dx === 0) return Infinity;\n  return (y2 - y1) / dx\n}\n\nfunction point_at_distance(x0: number, y0: number, slope: number, distance: number): [number, number] {\n  if (slope === 0) return [x0 + distance, y0];\n  if (slope === Infinity) return [x0, y0 + distance];\n  // https://www.geeksforgeeks.org/find-points-at-a-given-distance-on-a-line-of-given-slope\n  const partial = (distance * Math.sqrt(1 / (1 + Math.pow(slope, 2))))\n  return [x0 + partial, y0 + (slope * partial)]\n}\n\nfunction endpoints(p1: G.Point, p2: G.Point): [number, number, number, number] {\n  const d = POINT_RADIUS + 2\n  const [x1, y1] = p1.map(rel2abs);\n  const [x2, y2] = p2.map(rel2abs);\n  const m = slope(x1, y1, x2, y2);\n  const sign = Math.sign(m)\n  const desc = (m === 0 && x2 > x1)\n    || (m === Infinity && y2 > y1)\n    || (sign === 1 && x2 > x1)\n    || (sign === -1 && x2 > x1)\n  const [d1, d2] = desc ? [d, -d] : [-d, d]\n  const [x1a, y1a] = point_at_distance(x1, y1, m, d1);\n  const [x2a, y2a] = point_at_distance(x2, y2, m, d2);\n  return [x1a, y1a, x2a, y2a];\n}\n\ninterface IEdgeProps {\n  id: string;\n  p1: G.Point;\n  p2: G.Point;\n  weight?: number;\n  selected?: boolean;\n}\n\nconst Edge: React.FC<IEdgeProps> = ({ id, p1, p2, weight, selected }) => {\n  const [x1, y1, x2, y2] = endpoints(p1, p2);\n  const x = Math.min(x1, x2);\n  const y = Math.min(y1, y2);\n  const width = Math.max(x1, x2) - x;\n  const height = Math.max(y1, y2) - y;\n  const midpoint_x = x + (width / 2);\n  const midpoint_y = y + (height / 2);\n  const rect_w = 8;\n  const rect_h = 4;\n  const rect_x = midpoint_x - (rect_w / 2);\n  const rect_y = midpoint_y - (rect_h / 2);\n  return (\n    <g>\n      <line\n        x1={x1}\n        y1={y1}\n        x2={x2}\n        y2={y2}\n        className={classnames('edge', {\n          selected: !!selected\n        })}\n        strokeLinecap=\"round\"\n        markerEnd={selected ? 'url(#selected-arrow)' : 'url(#arrow)'}\n      />\n      {weight && (\n        <g>\n          <Draggable id={id} enabled={true}>\n            <rect x={rect_x} y={rect_y} width={rect_w} height={rect_h} className=\"weight-box\" />\n            <text x={midpoint_x} y={midpoint_y} className=\"weight-label\" style={{ fontSize: 3, cursor: 'ns-resize', userSelect: 'none' }} dominantBaseline=\"middle\" textAnchor=\"middle\">\n              {format_weight(weight)}\n            </text>\n          </Draggable>\n        </g>\n      )}\n    </g>\n  );\n}\n\nexport default Edge;\n","import React from 'react';\nimport classnames from 'classnames'\nimport { rel2abs, NOOP } from './util';\nimport * as G from '../../lib/graph';\n\ninterface INodeProps {\n  point: G.Point;\n  radius: number;\n  weight: number;\n  className?: string;\n  onClick?: (event: React.MouseEvent) => void;\n}\n\nconst Node: React.FC<INodeProps> = ({ point, radius, weight, className, onClick = NOOP }) => {\n  const [x, y] = point;\n  return (\n    <circle\n      cx={rel2abs(x)}\n      cy={rel2abs(y)}\n      r={radius * weight}\n      className={classnames('vertex', className)}\n      onClick={onClick}\n    />\n  )\n}\n\nexport default Node;\n","import React from 'react';\nimport { rel2abs } from './util';\nimport * as G from '../../lib/graph';\n\ninterface ILabelProps {\n  point: G.Point;\n  offset: number;\n  size: number;\n  text: string;\n}\n\nconst Label: React.FC<ILabelProps> = ({ point, offset, size, text }) => {\n  const [x, y] = point;\n  return (\n    <text\n      x={rel2abs(x + (Math.sign(x) * offset))}\n      y={rel2abs(y + (Math.sign(y) * offset))}\n      textAnchor=\"middle\"\n      dominantBaseline=\"middle\"\n      className=\"label\"\n      style={{ fontSize: size }}\n    >\n      {text}\n    </text>\n  )\n}\n\nexport default Label;\n","\nimport React from 'react';\nimport * as G from '../../lib/graph';\nimport { IConfig } from './util'\nimport Node from './Node';\nimport Label from './Label';\n\ninterface IPointProps {\n  point: G.Point;\n  weight: number;\n  label?: string;\n  className?: string;\n  onClick?: (event: React.MouseEvent) => void;\n  config: IConfig;\n}\n\nconst Point: React.FC<IPointProps> = ({ point, config, weight, label, className, onClick }) => (\n  <g onClick={onClick}>\n    <Label\n      text={label || \"\"}\n      point={point}\n      offset={config.label_offset}\n      size={config.label_size}\n    />\n\n    <Node\n      point={point}\n      radius={config.point_radius}\n      weight={1}\n      className=\"click-target\"\n    />\n\n    <Node\n      point={point}\n      radius={config.point_radius}\n      weight={weight}\n      className={className}\n    />\n  </g>\n);\n\nexport default Point;\n","import React from 'react';\nimport classnames from 'classnames'\nimport './WeightedGraph.css';\nimport {\n  SIZE,\n  POINT_RADIUS,\n  NOOP,\n  IConfig,\n  generateConfig\n} from './util';\nimport * as G from '../../lib/graph';\nimport Edge from './Edge';\nimport Point from './Point';\nimport { DraggableProvider, DragEvent } from '../Draggable';\n\nconst GRAPH_RADIUS = 33.33333;\nconst DEFAULT_CONFIG = generateConfig(POINT_RADIUS, GRAPH_RADIUS);\n\ninterface IProps {\n  labels?: string[];\n  weights: G.Vector;\n  selected1?: number;\n  selected2?: number;\n  onWeightDrag?: (event: DragEvent) => void;\n  onVertexClick?: (i: G.Vertex | null, event: React.MouseEvent) => void;\n  className?: string;\n  config?: IConfig\n}\n\nconst WeightedGraph: React.FC<IProps> = ({\n  labels = [],\n  weights = [],\n  onVertexClick = NOOP,\n  onWeightDrag,\n  className,\n  selected1,\n  selected2,\n  config: _config\n}) => {\n  const config = { ..._config, ...DEFAULT_CONFIG };\n  const graph = new G.Graph(weights);\n  const points = graph.chart(config.graph_radius);\n  const active_weights = graph.normalized_weights;\n  return (\n    <div className={classnames('WeightedGraph', className)}>\n      <DraggableProvider onDrag={onWeightDrag}>\n        <svg viewBox={`0 0 ${SIZE} ${SIZE}`}>\n          <defs>\n            <marker id=\"arrow\" viewBox=\"0 0 10 10\" refX=\"5\" refY=\"5\"\n              markerWidth=\"6\" markerHeight=\"6\"\n              orient=\"auto-start-reverse\"\n              className=\"edge-arrow\"\n            >\n              <path d=\"M 0 0 L 10 5 L 0 10 z\" />\n            </marker>\n            <marker id=\"selected-arrow\" viewBox=\"0 0 10 10\" refX=\"5\" refY=\"5\"\n              markerWidth=\"6\" markerHeight=\"6\"\n              orient=\"auto-start-reverse\"\n              className=\"edge-arrow selected\"\n            >\n              <path d=\"M 0 0 L 10 5 L 0 10 z\" />\n            </marker>\n          </defs>\n          <g style={{\n            transform: 'scale(1)',\n            transformOrigin: '50% 50%'\n          }}>\n            {graph.edges.map(({ a, b }) => {\n              const [p1, p2] = selected1 === a\n                ? [a, b]\n                : selected1 === b\n                  ? [b, a]\n                  : []\n              if (p1 == null || p2 == null) return null;\n              const weight = selected1 == null ? 0 : weights[p2]\n              if (weight === 0) return null;\n              return (\n                <Edge\n                  key={`${p1}:${p2}`}\n                  id={String(p2)}\n                  p1={points[p1]}\n                  p2={points[p2]}\n                  weight={onWeightDrag && weight}\n                  selected={selected1 === p1 && selected2 === p2}\n                />\n              )\n            })}\n            {points.map((point, i) => (\n              <Point\n                key={i}\n                point={point}\n                weight={selected1 === i ? 1 : active_weights[i]}\n                label={labels[i] || String(i)}\n                onClick={(event: React.MouseEvent) => onVertexClick(i, event)}\n                className={classnames({\n                  selected1: selected1 === i,\n                  selected2: selected2 === i\n                })}\n                config={config}\n              />\n            ))}\n          </g>\n        </svg>\n      </DraggableProvider>\n    </div>\n  );\n};\n\nexport default WeightedGraph;\n","import React, { useState } from 'react';\nimport classnames from 'classnames';\nimport cloneDeep from 'lodash/cloneDeep'\nimport WeightedGraph from './WeightedGraph';\nimport { DragEvent } from './Draggable';\nimport * as G from '../lib/graph';\n\ninterface IMarkovChartProps {\n  weights: G.Matrix;\n  current: G.Vertex;\n  next?: G.Vertex;\n  labels: string[];\n  onChange: (weights: G.Matrix) => void;\n}\n\nfunction RangeMeter(dmax: number) {\n  return (v0: number, distance: number) => {\n    const vmax = 1;\n    const vmin = 0;\n    dmax = Math.max(dmax, Math.abs(distance));\n\n    const p = distance / dmax;\n    const vspan = distance >= 0\n      ? vmax - v0\n      : v0 - vmin\n\n    return v0 + (p * vspan);\n  }\n}\n\nconst MarkovChart: React.FC<IMarkovChartProps> = ({\n  current = 0,\n  next,\n  weights,\n  labels,\n  onChange\n}) => {\n  const meter = RangeMeter(200);\n  const normalizedWeights = weights.map(G.normalize_proportions);\n  const [editWeights, setEditWeights] = useState<G.Matrix>(cloneDeep(normalizedWeights));\n  const [selected, setSelected] = useState<G.Vertex | null>(null);\n\n  function handleVertexClick(index: G.Vertex | null) {\n    setSelected(index === selected ? null : index);\n  }\n\n  function handleWeightDrag(event: DragEvent) {\n    if (!selected) return;\n    const index = parseInt(event.id, 10);\n    const values_0 = [...weights[selected]];\n    const v0 = values_0[index];\n    const { y } = event.delta;\n    const v1 = meter(v0, -1 * y);\n    const delta = v1 - v0;\n    try {\n      const values_1 = G.redistribute(values_0, index, delta);\n      editWeights[selected] = values_1;\n      setEditWeights([...editWeights]);\n    } catch (error) {\n      console.error(error);\n    }\n    if (event.committed) {\n      onChange([...editWeights])\n    }\n  }\n\n  return (\n    <div className=\"MarkovChart\">\n      <WeightedGraph\n        labels={labels}\n        weights={weights[current]}\n        className={classnames('active', {\n          fade: selected != null\n        })}\n        onVertexClick={(i) => {\n          if (selected) return;\n          handleVertexClick(i);\n        }}\n        selected1={current}\n        selected2={next}\n      />\n      {selected != null && (\n        <WeightedGraph\n          labels={labels}\n          weights={editWeights[selected]}\n          selected1={selected}\n          className=\"selected\"\n          onVertexClick={handleVertexClick}\n          onWeightDrag={handleWeightDrag}\n        />\n      )}\n    </div>\n  );\n}\n\nexport default MarkovChart;\n","import React, { useState } from 'react';\nimport ReactInputSlider, { InputSliderProps } from 'react-input-slider';\n\ninterface IValues {\n  x?: number;\n  y?: number;\n}\n\ninterface IProps extends InputSliderProps {\n  onChange: (values: IValues) => void;\n}\n\nconst Slider: React.FC<IProps> = ({ x, y, onChange, ...props }) => {\n  const [dragging, setDragging] = useState<boolean>(false);\n  const [values, setValues] = useState<IValues>({ x, y });\n\n  function handleChange(values: IValues) {\n    setValues(values);\n    onChange(values);\n  }\n\n  return (\n    <ReactInputSlider\n      {...props}\n      x={dragging && values.x ? values.x : x}\n      y={dragging && values.y ? values.y : y}\n      onChange={handleChange}\n      onDragStart={() => setDragging(true)}\n      onDragEnd={() => setDragging(false)}\n    />\n  )\n}\n\nexport default Slider\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { SIZE, HALF } from '../WeightedGraph/util'\n\ninterface IProps {\n  className?: string;\n}\n\nconst Circle: React.FC<IProps> = ({ className }) => (\n  <svg viewBox={`0 0 ${SIZE} ${SIZE}`} className={classnames('Circle', className)}>\n    <circle cx={HALF} cy={HALF} r={HALF} />\n  </svg>\n);\n\nexport default Circle;\n","import React from 'react';\nimport classnames from 'classnames';\n\nimport { SIZE } from '../WeightedGraph/util'\n\ninterface IProps {\n  className?: string;\n}\n\nconst Sawtooth: React.FC<IProps> = ({ className }) => (\n  <svg viewBox={`0 0 ${SIZE} ${SIZE}`} className={classnames('Sawtooth', className)}>\n    <polygon points={`0,${SIZE} ${SIZE},0 ${SIZE}, ${SIZE}`} />\n  </svg>\n);\n\nexport default Sawtooth;\n","import React from 'react';\n\ninterface RadioOption {\n  value: string;\n  title?: string;\n  label: React.ReactNode;\n}\n\ninterface IProps {\n  name: string;\n  value: string;\n  options: RadioOption[];\n  onChange: (value: string) => void;\n}\n\nconst RadioButtons: React.FC<IProps> = ({ name, value, options, onChange }) => (\n  <div className=\"RadioButtons\">\n    {options.map(({ label, title, value: _value }) => (\n      <div className=\"RadioButton\" key={_value}>\n        <input\n          type=\"radio\"\n          name={name}\n          id={_value}\n          value={_value}\n          onChange={() => onChange(_value)}\n          checked={_value === value}\n        />\n        <label htmlFor={_value} title={title}>\n          {label}\n        </label>\n      </div>\n    ))}\n  </div>\n)\n\nexport default RadioButtons;\n","import React from 'react';\nimport Slider from './Slider';\nimport { Params, PartialParams, Waveform, DelayTime } from '../lib/machine'\nimport Square from './icons/Square';\nimport Circle from './icons/Circle';\nimport Triangle from './icons/Triangle';\nimport Sawtooth from './icons/Sawtooth';\nimport RadioButtons from './RadioButtons';\n\nconst BG_COLOR = 'hsla(0, 0%, 0%, 0.4)'\nconst FG_COLOR = 'grey'\n\nconst WAVEFORM_OPTIONS = [\n  {\n    value: 'sine',\n    title: 'Sine',\n    label: <Circle className=\"waveform-icon\" />\n  },\n  {\n    value: 'square',\n    title: 'Square',\n    label: <Square className=\"waveform-icon\" />\n  },\n  {\n    value: 'triangle',\n    title: 'Triangle',\n    label: <Triangle className=\"waveform-icon\" />\n  },\n  {\n    value: 'sawtooth',\n    title: 'Sawtooth',\n    label: <Sawtooth className=\"waveform-icon\" />\n  }\n]\n\nconst DELAY_TIME_OPTIONS = [\n  { value: '4t', label: '4t' },\n  { value: '4n', label: '4' },\n  { value: '8t', label: '8t' },\n  { value: '8n', label: '8' }\n]\n\ninterface IControlsProps {\n  beat: number;\n  params: Params;\n  onChange: (params: PartialParams) => void;\n}\n\nconst Controls: React.FC<IControlsProps> = ({ params, onChange }) => {\n  return (\n    <form className=\"Controls\">\n      <fieldset className=\"form-col waveform\">\n        <label className=\"form-row\" htmlFor=\"waveform\">\n          Waveform\n        </label>\n        <div className=\"form-row\">\n          <RadioButtons\n            name=\"waveform\"\n            value={params.waveform}\n            onChange={(value) => onChange({ waveform: value as Waveform })}\n            options={WAVEFORM_OPTIONS}\n          />\n        </div>\n      </fieldset>\n      <fieldset className=\"form-col envelope\">\n        <label className=\"form-row\" htmlFor=\"envelope\">\n          Envelope\n        </label>\n        <div className=\"form-row\">\n          <div className=\"fader-bank\">\n            <div className=\"fader-container\">\n              <Slider\n                axis=\"y\"\n                y={params.attack}\n                ymin={0.01}\n                ymax={1.0}\n                ystep={0.01}\n                onChange={({ y }) => onChange({ attack: y })}\n                styles={{\n                  active: {\n                    background: FG_COLOR\n                  },\n                  track: {\n                    background: BG_COLOR,\n                    cursor: 'move-y',\n                    height: '200px'\n                  }\n                }}\n              />\n              <label className=\"fader-label\">A</label>\n            </div>\n            <div className=\"fader-container\">\n              <Slider\n                axis=\"y\"\n                y={params.decay}\n                ymin={0.01}\n                ymax={1.0}\n                ystep={0.01}\n                onChange={({ y }) => onChange({ decay: y })}\n                styles={{\n                  active: {\n                    background: FG_COLOR\n                  },\n                  track: {\n                    background: BG_COLOR,\n                    cursor: 'move-y',\n                    height: '200px'\n                  }\n                }}\n              />\n              <label className=\"fader-label\">D</label>\n            </div>\n            <div className=\"fader-container\">\n              <Slider\n                axis=\"y\"\n                y={params.sustain}\n                ymin={0.01}\n                ymax={1.0}\n                ystep={0.01}\n                onChange={({ y }) => onChange({ sustain: y })}\n                styles={{\n                  active: {\n                    background: FG_COLOR\n                  },\n                  track: {\n                    background: BG_COLOR,\n                    cursor: 'move-y',\n                    height: '200px'\n                  }\n                }}\n              />\n              <label className=\"fader-label\">S</label>\n            </div>\n            <div className=\"fader-container\">\n              <Slider\n                axis=\"y\"\n                y={params.release}\n                ymin={0.01}\n                ymax={1.0}\n                ystep={0.01}\n                onChange={({ y }) => onChange({ release: y })}\n                styles={{\n                  active: {\n                    background: FG_COLOR\n                  },\n                  track: {\n                    background: BG_COLOR,\n                    cursor: 'move-y',\n                    height: '200px'\n                  }\n                }}\n              />\n              <label className=\"fader-label\">R</label>\n            </div>\n          </div>\n        </div>\n      </fieldset>\n      <fieldset className=\"form-col delay\">\n        <label className=\"form-row\" htmlFor=\"delay_wet\">\n          Delay\n        </label>\n        <div className=\"form-row\">\n          <Slider\n            axis=\"xy\"\n            x={params.delay_feedback}\n            xmin={0.0}\n            xmax={1.0}\n            xstep={0.01}\n            y={params.delay_wet}\n            ymin={0.0}\n            ymax={1.0}\n            ystep={0.01}\n            onChange={({ x, y }) => onChange({\n              delay_feedback: x,\n              delay_wet: y\n            })}\n            styles={{\n              track: {\n                background: BG_COLOR,\n                borderRadius: '4px',\n                cursor: 'move',\n                width: '220px'\n              }\n            }}\n          />\n        </div>\n      </fieldset>\n      <fieldset className=\"form-col delay-time\">\n        <label className=\"form-row\" htmlFor=\"delay_time\">\n          Delay Time\n        </label>\n        <div className=\"form-row\">\n          <RadioButtons\n            name=\"delay_time\"\n            value={params.delay_time}\n            onChange={(value) => onChange({ delay_time: value as DelayTime })}\n            options={DELAY_TIME_OPTIONS}\n          />\n        </div>\n      </fieldset>\n      <fieldset className=\"form-col chorus\">\n        <label className=\"form-row\" htmlFor=\"chorus_frequency\">\n          Chorus\n        </label>\n        <div className=\"form-row\">\n          <Slider\n            axis=\"xy\"\n            x={params.chorus_frequency}\n            xmin={0.0}\n            xmax={20.0}\n            xstep={0.1}\n            y={params.chorus_depth}\n            ymin={0.0}\n            ymax={1.0}\n            ystep={0.01}\n            onChange={({ x, y }) => onChange({\n              chorus_frequency: x,\n              chorus_depth: y\n            })}\n            styles={{\n              track: {\n                background: BG_COLOR,\n                borderRadius: '4px',\n                cursor: 'move',\n                width: '220px'\n              }\n            }}\n          />\n        </div>\n      </fieldset>\n      <fieldset className=\"form-col pulse-width\">\n        <label className=\"form-row\" htmlFor=\"width\">\n          Pulse Width\n        </label>\n        <div className=\"form-row\">\n          <div className=\"landscape\">\n            <Slider\n              axis=\"x\"\n              x={params.width}\n              xmin={0.0}\n              xmax={1.0}\n              xstep={0.1}\n              onChange={({ x }) => onChange({ width: x })}\n              styles={{\n                active: {\n                  background: FG_COLOR,\n                },\n                track: {\n                  background: BG_COLOR,\n                  cursor: 'move',\n                  width: '220px'\n                }\n              }}\n            />\n          </div>\n          <div className=\"portrait\">\n            <Slider\n              axis=\"y\"\n              y={params.width}\n              ymin={0.0}\n              ymax={1.0}\n              ystep={0.1}\n              onChange={({ y }) => onChange({ width: y })}\n              styles={{\n                active: {\n                  background: FG_COLOR,\n                },\n                track: {\n                  background: BG_COLOR,\n                  cursor: 'move',\n                  height: '200px'\n                }\n              }}\n            />\n          </div>\n        </div>\n      </fieldset>\n    </form>\n  )\n}\n\nexport default Controls;\n","import _ from 'lodash';\nimport { VoseAliasMethod } from 'vose-alias-method';\nimport { EventEmitter } from 'events';\n\nconst Tone = require('tone');\n\nexport type Waveform = 'sine' | 'square' | 'triangle' | 'sawtooth'\nexport type DelayTime = '1m' | '2n' | '4n' | '4t' | '8n' | '8t'\n\nexport interface PartialParams {\n  tempo?: number;\n  waveform?: Waveform;\n  attack?: number;\n  decay?: number;\n  sustain?: number;\n  release?: number;\n  delay_wet?: number;\n  delay_time?: DelayTime;\n  delay_feedback?: number;\n  chorus_frequency?: number;\n  chorus_delay_time?: number;\n  chorus_depth?: number;\n  width?: number;\n}\n\nexport interface Params {\n  tempo: number;\n  waveform: Waveform;\n  attack: number;\n  decay: number;\n  sustain: number;\n  release: number;\n  delay_wet: number;\n  delay_time: DelayTime;\n  delay_feedback: number;\n  chorus_frequency: number;\n  chorus_delay_time: number;\n  chorus_depth: number;\n  width: number;\n}\n\nconst DEFAULT_PARAMS: Params = {\n  tempo: 90,\n  waveform: 'sine',\n  attack: 0.01,\n  decay: 0.5,\n  sustain: 0.1,\n  release: 0.5,\n  delay_wet: 0.5,\n  delay_time: '4n',\n  delay_feedback: 0.33,\n  chorus_frequency: 4,\n  chorus_delay_time: 1.5,\n  chorus_depth: 0.25,\n  width: 0.1,\n};\n\nconst C4 = 48;\nconst MAJOR_TRIAD = [0, 4, 7];\nconst MINOR_TRIAD = [0, 3, 7];\nconst DIMINISHED_TRIAD = [0, 3, 6];\nconst SCALE_DEGREE_TRIADS = [\n  MAJOR_TRIAD,\n  MINOR_TRIAD,\n  MINOR_TRIAD,\n  MAJOR_TRIAD,\n  MAJOR_TRIAD,\n  MINOR_TRIAD,\n  DIMINISHED_TRIAD\n];\n\nconst ROOT_OFFSETS = [0, 2, 4, 5, 7, 9, 11];\n\nconst rand = (min: number, max: number) => Math.floor(Math.random() * (max - min) + min);\n\nexport default class Machine extends EventEmitter {\n  generators: VoseAliasMethod[];\n  probabilities: number[][];\n  pattern: ChordPattern;\n  current: number;\n  range: number;\n  synth: Synth;\n\n  constructor(probabilities: number[][], params: PartialParams = {}) {\n    super();\n    params = { ...DEFAULT_PARAMS, ...params }\n    this.synth = new Synth(params as Params);\n    this.current = 0;\n    this.range = 2;\n    this.pattern = new ChordPattern(this.current, this.range);\n    this.probabilities = [];\n    this.generators = [];\n    this.updateParams(params);\n    this.updateProbabilities(probabilities);\n\n    Tone.Transport.latencyHint = \"playback\"\n    Tone.Transport.loop = true;\n    Tone.Transport.loopStart = 0;\n    Tone.Transport.loopEnd = '1m';\n\n    // half way through a loop\n    Tone.Transport.scheduleRepeat((t: number) => {\n      Tone.Draw.schedule(() => {\n        const next = this.next(this.current);\n        this.emit('select', next, this.current)\n        this.current = next;\n      }, t);\n    }, '1:0:0', '0:2:0');\n\n    // start of each loop\n    Tone.Transport.scheduleRepeat((t: number) => {\n      Tone.Draw.schedule(() => {\n        this.pattern = new ChordPattern(this.current, this.range);\n        this.emit('change', this.pattern, this.current)\n      }, t);\n    }, '1:0:0', '0:0:0');\n\n    // quarter notes\n    Tone.Transport.scheduleRepeat((t: number) => {\n      Tone.Draw.schedule(() => {\n        const { position } = Tone.Transport\n        const beat = parseInt(position.split(':')[1], 10);\n        this.emit('beat', beat);\n      }, t);\n    }, '0:0:1', '0:0:0');\n\n    // eighth notes\n    Tone.Transport.scheduleRepeat((t: number) => {\n      const i = rand(0, this.pattern.notes.length)\n      const note = this.pattern.notes[i];\n      this.synth.trigger(note);\n    }, '0:0:2', '0:0:0');\n  }\n\n  get params(): Params {\n    return {\n      tempo: Tone.Transport.bpm.value,\n      waveform: this.synth.voice.get('oscillator').oscillator.type,\n      attack: this.synth.voice.get('envelope').envelope.attack,\n      decay: this.synth.voice.get('envelope').envelope.decay,\n      sustain: this.synth.voice.get('envelope').envelope.sustain,\n      release: this.synth.voice.get('envelope').envelope.release,\n      delay_wet: this.synth.delay.wet.value,\n      delay_time: Tone.Time(this.synth.delay.delayTime.value).toNotation(),\n      delay_feedback: this.synth.delay.feedback.value,\n      chorus_frequency: this.synth.chorus.frequency.value,\n      chorus_delay_time: this.synth.chorus.delayTime,\n      chorus_depth: this.synth.chorus.depth,\n      width: this.synth.width,\n    }\n  }\n\n  updateParams = (_params: PartialParams = {}) => {\n    const params = { ...this.params, ..._params };\n    Tone.Transport.bpm.value = params.tempo;\n    this.synth.update(params);\n  }\n\n  updateProbabilities(probabilities: number[][]) {\n    this.probabilities = probabilities;\n    this.generators = probabilities.map((col) => new VoseAliasMethod(col));\n  }\n\n  next(i: number) {\n    return this.generators[i].next();\n  }\n\n  start() {\n    if (Tone.Transport.state === 'started') return;\n    Tone.Transport.start();\n  }\n\n  stop() {\n    Tone.Transport.stop();\n  }\n\n  toggle() {\n    Tone.Transport.toggle()\n  }\n\n  get state() {\n    return Tone.Transport.state\n  }\n}\n\nclass ChordPattern {\n  notes: number[];\n  constructor(index: number, range: number) {\n    const root = C4 + ROOT_OFFSETS[index];\n    const degrees = SCALE_DEGREE_TRIADS[index];\n    const shifts = new Array(range).fill(0).map((x, i) => i);\n    this.notes = _.flatten(\n      shifts.map((delta) => degrees.map((d) => root + d + (delta * 12)))\n    ).map((note) => Tone.Frequency(note, 'midi').toNote());\n  }\n}\n\nclass Synth {\n  delay: any;\n  chorus: any;\n  voice: any;\n  width: number;\n\n  constructor(params: Params) {\n    this.width = params.width;\n    this.delay = new Tone.PingPongDelay(params.delay_time, params.delay_feedback)\n    this.delay.wet.value = params.delay_wet;\n    this.chorus = new Tone.Chorus(params.chorus_frequency, params.chorus_delay_time, params.chorus_depth);\n    this.voice = new Tone.PolySynth(4, Tone.Synth, {\n      oscillator: { type: params.waveform }\n    });\n    this.voice.set({\n      envelope: {\n        attack: params.attack,\n        decay: params.decay,\n        sustain: params.sustain,\n        release: params.release\n      }\n    })\n    this.voice.chain(this.chorus, this.delay, Tone.Master);\n  }\n\n  update(params: Params) {\n    this.width = params.width;\n    this.voice.set({\n      oscillator: { type: params.waveform },\n      envelope: {\n        attack: params.attack,\n        decay: params.decay,\n        sustain: params.sustain,\n        release: params.release,\n      }\n    })\n\n    this.delay.wet.value = params.delay_wet;\n    this.delay.delayTime.value = params.delay_time;\n    this.delay.feedback.value = params.delay_feedback;\n    this.chorus.frequency.value = params.chorus_frequency;\n    this.chorus.delayTime = params.chorus_delay_time;\n    this.chorus.depth = params.chorus_depth;\n  }\n\n  trigger(note: number | string, velocity: number = 0.1) {\n    this.voice.triggerAttackRelease(note, this.width, undefined, velocity);\n  }\n}\n","import React, { useEffect, useState } from 'react';\nimport './SleepMachine.css'\nimport ProgressMeter from './ProgressMeter';\nimport PlayPauseButton from './PlayPauseButton';\nimport MarkovChart from './MarkovChart';\nimport Controls from './Controls';\nimport Machine from '../lib/machine'\n\nconst LABELS = ['C', 'D', 'E', 'F', 'G', 'A', 'B']\nconst INITIAL_WEIGHTS = [\n  [0.00, 0.09, 0.06, 0.30, 0.40, 0.15, 0],\n  [0.18, 0.00, 0.13, 0.22, 0.22, 0.25, 0],\n  [0.06, 0.10, 0.00, 0.41, 0.10, 0.33, 0],\n  [0.38, 0.06, 0.04, 0.00, 0.38, 0.14, 0],\n  [0.27, 0.07, 0.05, 0.27, 0.00, 0.34, 0],\n  [0.16, 0.09, 0.09, 0.36, 0.30, 0.00, 0],\n  [0.16, 0.16, 0.16, 0.16, 0.16, 0.16, 0]\n];\n\nconst machine = new Machine(INITIAL_WEIGHTS);\n\ninterface IProps { }\n\nfunction useMachine(machine: Machine): [number, number, number | undefined, boolean, boolean, (playing: boolean) => void] {\n  const [started, setStarted] = useState<boolean>(false);\n  const [playing, _setPlaying] = useState<boolean>(false);\n  const [beat, setBeat] = useState<number>(0);\n  const [current, setCurrent] = useState<number>(0);\n  const [next, setNext] = useState<number | undefined>(undefined);\n\n  function setPlaying(value: boolean) {\n    setStarted(true);\n    _setPlaying(value);\n  }\n\n  useEffect(() => {\n    machine.on('select', (next, current) => {\n      setNext(next);\n    }).on('change', (pattern, active) => {\n      setNext(undefined);\n      setCurrent(active);\n    }).on('beat', (beat) => {\n      setBeat(beat)\n    });\n\n    return () => machine.stop();\n  }, [])\n\n  return [beat, current, next, started, playing, setPlaying]\n}\n\nconst KEYCODE = {\n  SPACEBAR: 32\n};\n\nconst SleepMachine: React.FC<IProps> = () => {\n  const [beat, current, next, started, playing, setPlaying] = useMachine(machine)\n\n  function handlePlayPause() {\n    const machineState = machine.state === 'started'\n    setPlaying(!machineState)\n    machine.toggle();\n  }\n\n  useEffect(() => {\n    function handleKeyDown(event: KeyboardEvent) {\n      // TODO: on my machine, spacebar will toggle a focused button element.\n      // this means that if the PlayPauseButton is focused then spacebar\n      // keypresses will toggle the machine state twice. as a work around.\n      // we can ignore spacebar keypresses if the activeElement is the\n      // PlayPauseButton. it might be safer to use a throttle or debounce\n      // here instead\n      if (document.activeElement?.classList.contains('PlayPauseButton')) return\n      if (event.keyCode === KEYCODE.SPACEBAR) return handlePlayPause();\n    }\n    document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, []);\n\n  function handleWeightsChange(weights: number[][]) {\n    machine.updateProbabilities(weights);\n  }\n\n  return (\n    <div className=\"SleepMachine-container\">\n      <header className=\"SleepMachine-header\">\n        <h1 className=\"wordmark\">Zzz Machine</h1>\n        <div className=\"transport-controls-container\">\n          <div className=\"transport-controls\">\n            <div className=\"ProgressMeter-container\">\n              {playing\n                ? (\n                  <ProgressMeter beat={beat} />\n                )\n                : <PlayPauseButton playing={playing} onClick={handlePlayPause} />\n              }\n            </div>\n            <input\n              type=\"number\"\n              id=\"tempo\"\n              name=\"tempo\"\n              value={machine.params.tempo}\n              onChange={(event) => machine.updateParams({\n                tempo: parseInt(event.target.value, 10)\n              })}\n              style={{ width: '5ch' }}\n            />\n          </div>\n        </div>\n      </header>\n      <main className=\"App-main\">\n        {!started && (\n          <div className=\"overlay\">\n            <div className=\"start-message\" onClick={handlePlayPause}>\n              <div style={{ marginBottom: '1rem', height: '3.5rem', width: '3.5rem' }}>\n                <PlayPauseButton playing={false} onClick={() => { }} />\n              </div>\n              Play\n            </div>\n          </div>\n        )}\n        <div className=\"SleepMachine\">\n          <div className=\"viz-container\">\n            <div className=\"MarkovChart-container\">\n              <MarkovChart\n                labels={LABELS}\n                current={current}\n                next={next}\n                weights={machine.probabilities}\n                onChange={handleWeightsChange}\n              />\n            </div>\n          </div>\n          <div className=\"Controls-container\">\n            <Controls\n              beat={beat}\n              params={machine.params}\n              onChange={machine.updateParams}\n            />\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default SleepMachine;\n","import React from 'react';\nimport './App.css'\nimport SleepMachine from './components/SleepMachine';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <SleepMachine />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}