(this["webpackJsonpsleep-machine"]=this["webpackJsonpsleep-machine"]||[]).push([[0],{140:function(e,t,a){},146:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(54),c=a.n(o),i=(a(67),a(68),a(1)),s=(a(69),a(2)),l=a.n(s),u=(Math.PI,function(){}),m=function(e){return 50+e};var d=function(e){var t=e.beat;return r.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100),className:"ProgressMeter"},[0,1,3,2].map((function(e,a){return r.a.createElement("rect",{key:e,className:l()({on:t===e}),x:a%2===0?0:52,y:a<2?0:52,height:48,width:48})})))},h=a(10),v=function(e){var t=e.className,a=Object(h.a)(e,["className"]);return r.a.createElement("svg",Object.assign({viewBox:"0 0 ".concat(100," ").concat(100),className:l()("Triangle",t)},a),r.a.createElement("polygon",{points:"0,".concat(100," ").concat(50,",0 ").concat(100,",").concat(100)}))},f=function(e){var t=e.className;return r.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100),className:l()("Square",t)},r.a.createElement("rect",{x:0,y:0,height:100,width:100}))},y=function(e){var t=e.playing,a=e.onClick;return r.a.createElement("button",{onClick:a,className:"PlayPauseButton"},t?r.a.createElement(f,null):r.a.createElement(v,{style:{transform:"rotate(90deg)"}}))},p=a(12),g=a(55),b=a.n(g),E=a(14),w=(a(140),a(5)),x=a(7),k=a(11),N=a.n(k);function j(e,t,a){if(null==e)throw new Error("Invalid value");var n=Object(i.a)(t,2),r=n[0],o=n[1],c=Object(i.a)(a,2),s=c[0],l=c[1];if(r>=o)throw new Error("Invalid src Range: [".concat(r,", ").concat(o,"]"));if(s>=l)throw new Error("Invalid dst Range: [".concat(s,", ").concat(l,"]"));return(e-r)*(l-s)/(o-r)+s}function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return[];var t=N.a.sum(e);if(0===t)return e.map((function(e){return 0}));var a=[0,t],n=[0,1];return e.map((function(e){return j(e,a,n)}))}var M=function(){function e(t,a){Object(w.a)(this,e),this.a=void 0,this.b=void 0,this.a=t,this.b=a}return Object(x.a)(e,[{key:"equals",value:function(e){return this.a===e.a&&this.b===e.b||this.a===e.b&&this.b===e.a}},{key:"includes",value:function(e){return e===this.a||e===this.b}}]),e}(),_=function(){function e(t){Object(w.a)(this,e),this.weights=void 0,this.weights=t}return Object(x.a)(e,[{key:"chart",value:function(e){var t=this;return this.vertices.map((function(a){var n=360/t.order*a*Math.PI/180;return[e*Math.sin(n),-1*e*Math.cos(n),n]}))}},{key:"order",get:function(){return this.weights.length}},{key:"normalized_weights",get:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return[];var t=Math.max.apply(Math,Object(p.a)(e)),a=[0,0===t?1:t],n=[0,1];return e.map((function(e){return j(e,a,n)}))}(this.weights)}},{key:"vertices",get:function(){return new Array(this.order).fill(0).map((function(e,t){return t}))}},{key:"edges",get:function(){var e=this;return N.a.chain(this.vertices).map((function(t){return e.vertices.map((function(e){return t!==e&&new M(t,e)}))})).flatten().compact().uniqBy((function(e){return[e.a,e.b].sort().join(":")})).value()}}]),e}(),C=a(23),S=a(22),D=a(24),T=r.a.createContext(null),L=function(e){var t=e.id,a=e.enabled,o=e.children;return a?r.a.createElement(T.Consumer,null,(function(e){if(!e)throw new Error("Invariant violation: DraggableContext.Consumer rendered without a context");return r.a.createElement("g",{onMouseDown:function(a){var n=a.clientX,r=a.clientY;e.setOrigin({id:t,x:n,y:r})}},o)})):r.a.createElement(n.Fragment,null,o)},B=function(e){function t(e){var a;return Object(w.a)(this,t),(a=Object(C.a)(this,Object(S.a)(t).call(this,e))).onMouseMove=function(e){a.handleDrag(!1,e)},a.onMouseUp=function(e){a.handleDrag(!0,e)},a.handleDrag=function(e,t){var n=a.props.onDrag;if(n){var r=a.state.origin;if(r){var o=r.id,c={x:t.clientX,y:t.clientY};n({id:o,origin:r,delta:{x:c.x-r.x,y:c.y-r.y},destination:c,committed:e}),e&&a.setState({origin:null})}}},a.state={origin:null},a}return Object(D.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){this.props.onDrag&&(document.addEventListener("mouseup",this.onMouseUp),document.addEventListener("mousemove",this.onMouseMove))}},{key:"componentWillUnmount",value:function(){this.props.onDrag&&(document.removeEventListener("mouseup",this.onMouseUp),document.removeEventListener("mousemove",this.onMouseMove))}},{key:"render",value:function(){var e=this,t=this.props,a=t.children;if(!t.onDrag)return a;var n=this.state.origin;return r.a.createElement(T.Provider,{value:{origin:n,setOrigin:function(t){return e.setState({origin:t})}}},a)}}]),t}(r.a.Component);function P(e,t,a,n){if(0===a)return[e+n,t];if(a===1/0)return[e,t+n];var r=n*Math.sqrt(1/(1+Math.pow(a,2)));return[e+r,t+a*r]}var q,z=8,R=8,A=1.5,F=1,I=function(e){var t=e.id,a=e.p1,n=e.p2,o=e.weight,c=e.selected,s=function(e,t){var a=e.map(m),n=Object(i.a)(a,2),r=n[0],o=n[1],c=t.map(m),s=Object(i.a)(c,2),l=s[0],u=s[1],d=function(e,t,a,n){var r=a-e;return 0===r?1/0:(n-t)/r}(r,o,l,u),h=Math.sign(d),v=0===d&&l>r||d===1/0&&u>o||1===h&&l>r||-1===h&&l>r?[7,-7]:[-7,7],f=Object(i.a)(v,2),y=f[0],p=f[1],g=P(r,o,d,y),b=Object(i.a)(g,2),E=b[0],w=b[1],x=P(l,u,d,p),k=Object(i.a)(x,2);return[E,w,k[0],k[1]]}(a,n),u=Object(i.a)(s,4),d=u[0],h=u[1],v=u[2],f=u[3],y=Math.min(d,v),p=Math.min(h,f),g=y+(Math.max(d,v)-y)/2,b=p+(Math.max(h,f)-p)/2,E=g-z/2,w=b-R/2,x=[[g-A/2,b-R/2],[g,b-R/2-F],[g+A/2,b-R/2]].map((function(e){return e.join(",")})),k=[[g-A/2,b+R/2],[g,b+R/2+F],[g+A/2,b+R/2]].map((function(e){return e.join(",")}));return r.a.createElement("g",null,r.a.createElement("line",{x1:d,y1:h,x2:v,y2:f,className:l()("edge",{selected:!!c}),strokeLinecap:"round",markerEnd:c?"url(#selected-arrow)":"url(#arrow)"}),o&&r.a.createElement("g",{"data-index":t},r.a.createElement(L,{id:t,enabled:!0},r.a.createElement("rect",{x:E,y:w,width:z,height:R,className:"weight-box"}),r.a.createElement("text",{x:g,y:b,className:"weight-label",style:{fontSize:3,cursor:"ns-resize",userSelect:"none"},dominantBaseline:"middle",textAnchor:"middle"},"".concat((100*o).toFixed(0),"%")),r.a.createElement("polygon",{className:"edge-drag-triangle-up",points:x.join(" ")}),r.a.createElement("polygon",{className:"edge-drag-triangle-down",points:k.join(" ")}))))},V=function(e){var t=e.point,a=e.radius,n=e.weight,o=e.className,c=e.onClick,s=void 0===c?u:c,d=Object(i.a)(t,2),h=d[0],v=d[1];return r.a.createElement("circle",{cx:m(h),cy:m(v),r:a*n,className:l()("vertex",o),onClick:s})},W=function(e){var t=e.point,a=e.offset,n=e.size,o=e.text,c=Object(i.a)(t,2),s=c[0],l=c[1];return r.a.createElement("text",{x:m(s+Math.sign(s)*a),y:m(l+Math.sign(l)*a),textAnchor:"middle",dominantBaseline:"middle",className:"label",style:{fontSize:n}},o)},H=function(e){var t=e.point,a=e.config,n=e.weight,o=e.label,c=e.className,i=e.onClick,s=e.onMouseEnter,l=e.onMouseLeave;return r.a.createElement("g",{onClick:i,onMouseEnter:s,onMouseLeave:l},r.a.createElement(W,{text:o||"",point:t,offset:a.label_offset,size:a.label_size}),r.a.createElement(V,{point:t,radius:a.point_radius,weight:1,className:"click-target"}),r.a.createElement(V,{point:t,radius:a.point_radius,weight:n,className:c}))},U={point_radius:q=5,label_offset:2*q,label_size:.8*q,graph_radius:33.33333},X=function(e){var t=e.labels,a=void 0===t?[]:t,n=e.weights,o=void 0===n?[]:n,c=e.onVertexMouseEnter,s=void 0===c?u:c,m=e.onVertexMouseLeave,d=void 0===m?u:m,h=e.onVertexClick,v=void 0===h?u:h,f=e.onWeightDrag,y=e.className,p=e.selected1,g=e.selected2,b=e.config,w=Object(E.a)({},b,{},U),x=new _(o),k=x.chart(w.graph_radius),N=x.normalized_weights;return r.a.createElement("div",{className:l()("WeightedGraph",y)},r.a.createElement(B,{onDrag:f},r.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100)},r.a.createElement("defs",null,r.a.createElement("marker",{id:"arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",className:"edge-arrow"},r.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"})),r.a.createElement("marker",{id:"selected-arrow",viewBox:"0 0 10 10",refX:"5",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto-start-reverse",className:"edge-arrow selected"},r.a.createElement("path",{d:"M 0 0 L 10 5 L 0 10 z"}))),r.a.createElement("g",{style:{transform:"scale(1)",transformOrigin:"50% 50%"}},x.edges.map((function(e){var t=e.a,a=e.b,n=p===t?[t,a]:p===a?[a,t]:[],c=Object(i.a)(n,2),s=c[0],l=c[1];if(null==s||null==l)return null;var u=null==p?0:o[l];return 0===u?null:r.a.createElement(I,{key:"".concat(s,":").concat(l),id:String(l),p1:k[s],p2:k[l],weight:f&&u,selected:p===s&&g===l})})),k.map((function(e,t){return r.a.createElement(H,{key:t,point:e,weight:p===t?1:N[t],label:a[t]||String(t),onClick:function(e){return v(t,e)},onMouseEnter:function(e){return s(t,e)},onMouseLeave:function(e){return d(t,e)},className:l()({selected1:p===t,selected2:g===t}),config:w})}))))))};var Y=function(e){var t,a=e.current,o=void 0===a?0:a,c=e.next,s=e.weights,u=e.labels,m=e.onChange,d=(t=200,function(e,a){return e+a/(t=Math.max(t,Math.abs(a)))*(a>=0?1-e:e-0)}),h=s.map(O),v=Object(n.useState)(b()(h)),f=Object(i.a)(v,2),y=f[0],g=f[1],E=Object(n.useState)(null),w=Object(i.a)(E,2),x=w[0],k=w[1],j=Object(n.useState)(null),M=Object(i.a)(j,2),_=M[0],C=M[1],S=Object(n.useCallback)((function(e){C((function(t){return e===t?null:e}))}),[]);function D(e){k(e)}function T(){k(null)}Object(n.useEffect)((function(){function e(e){e.target&&(e.target.classList.contains("weight-label")||null!=_&&S(null))}return window.addEventListener("mousedown",e),function(){return window.removeEventListener("mousedown",e)}}),[S,_]);var L=null==_?x:_;return r.a.createElement("div",{className:"MarkovChart"},r.a.createElement(X,{labels:u,weights:s[o],className:l()("active",{fade:null!=L}),onVertexClick:function(e){_||S(e)},onVertexMouseEnter:D,onVertexMouseLeave:T,selected1:o,selected2:c}),null!=L&&r.a.createElement(X,{labels:u,weights:y[L],selected1:L,className:"selected",onVertexClick:S,onVertexMouseEnter:D,onVertexMouseLeave:T,onWeightDrag:function(e){if(null!=_){var t=parseInt(e.id,10),a=Object(p.a)(s[_]),n=a[t],r=e.delta.y,o=d(n,-1*r)-n;try{var c=function(e,t,a){if(t>e.length-1)throw new Error("index out of bounds");if(a<-1||a>1)throw new Error("delta out of bounds");if(e.length<2)throw new Error("vector length must be greater than 1");e.forEach((function(e){if(e<0||e>1)throw new Error("vector not normalized: value out of bounds")}));var n=N.a.sum(e);if(n<.99995||n>1+5e-5)throw new Error("vector not normalized: proportions sum to ".concat(n));var r=e[t],o=r+a;if(o<0||o>1)throw new Error("delta effect out of bounds");var c=n-r;if(0===c){var i=(n-o)/(e.length-1);return e.map((function(e,a){return a===t?o:i}))}return e.map((function(e,n){return n===t?o:e+-1*a*(e/c)}))}(a,t,o);y[_]=c,g(Object(p.a)(y))}catch(i){console.error(i)}e.committed&&m(Object(p.a)(y))}}}))},G=a(61),J=function(e){var t=e.x,a=e.y,o=e.onChange,c=Object(h.a)(e,["x","y","onChange"]),s=Object(n.useState)(!1),l=Object(i.a)(s,2),u=l[0],m=l[1],d=Object(n.useState)({x:t,y:a}),v=Object(i.a)(d,2),f=v[0],y=v[1];return r.a.createElement("div",{style:{transform:"y"===c.axis?"rotate(180deg)":"",width:"y"!==c.axis?"100%":"auto",minHeight:"y"!==c.axis?"100px":void 0}},r.a.createElement(G.a,Object.assign({},c,{x:u&&f.x?f.x:t,y:u&&f.y?f.y:a,onChange:function(e){var t={x:null!=e.x?1-e.x:void 0,y:null!=e.y?1-e.y:void 0};y(t),o(t)},onDragStart:function(){return m(!0)},onDragEnd:function(){return m(!1)}})))},K=function(e){var t=e.className;return r.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100),className:l()("Circle",t)},r.a.createElement("circle",{cx:50,cy:50,r:50}))},Z=function(e){var t=e.className;return r.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100),className:l()("Sawtooth",t)},r.a.createElement("polygon",{points:"0,".concat(100," ").concat(100,",0 ").concat(100,", ").concat(100)}))},$=function(e){var t=e.name,a=e.value,n=e.options,o=e.onChange;return r.a.createElement("div",{className:"RadioButtons"},n.map((function(e){var n=e.label,c=e.title,i=e.value;return r.a.createElement("div",{className:"RadioButton",key:i},r.a.createElement("input",{type:"radio",name:t,id:i,value:i,onChange:function(){return o(i)},checked:i===a}),r.a.createElement("label",{htmlFor:i,title:c},n))})))},Q="hsla(0, 0%, 0%, 0.4)",ee=[{value:"sine",title:"Sine",label:r.a.createElement(K,{className:"waveform-icon"})},{value:"square",title:"Square",label:r.a.createElement(f,{className:"waveform-icon"})},{value:"triangle",title:"Triangle",label:r.a.createElement(v,{className:"waveform-icon"})},{value:"sawtooth",title:"Sawtooth",label:r.a.createElement(Z,{className:"waveform-icon"})}],te=[{value:"4t",label:"4t"},{value:"4n",label:"4"},{value:"8t",label:"8t"},{value:"8n",label:"8"}],ae=function(e){var t=e.params,a=e.onChange;return r.a.createElement("form",{className:"Controls"},r.a.createElement("fieldset",{className:"form-col waveform"},r.a.createElement("label",{className:"form-row",htmlFor:"waveform"},"Waveform"),r.a.createElement("div",{className:"form-row"},r.a.createElement($,{name:"waveform",value:t.waveform,onChange:function(e){return a({waveform:e})},options:ee}))),r.a.createElement("fieldset",{className:"form-col envelope"},r.a.createElement("label",{className:"form-row",htmlFor:"envelope"},"Envelope"),r.a.createElement("div",{className:"form-row"},r.a.createElement("div",{className:"fader-bank"},r.a.createElement("div",{className:"fader-container"},r.a.createElement(J,{axis:"y",y:t.attack,ymin:.01,ymax:1,ystep:.01,onChange:function(e){var t=e.y;return a({attack:t})},styles:{active:{background:"grey"},track:{background:Q,cursor:"move-y",height:"100px"}}}),r.a.createElement("label",{className:"fader-label"},"A")),r.a.createElement("div",{className:"fader-container"},r.a.createElement(J,{axis:"y",y:t.decay,ymin:.01,ymax:1,ystep:.01,onChange:function(e){var t=e.y;return a({decay:t})},styles:{active:{background:"grey"},track:{background:Q,cursor:"move-y",height:"100px"}}}),r.a.createElement("label",{className:"fader-label"},"D")),r.a.createElement("div",{className:"fader-container"},r.a.createElement(J,{axis:"y",y:t.sustain,ymin:.01,ymax:1,ystep:.01,onChange:function(e){var t=e.y;return a({sustain:t})},styles:{active:{background:"grey"},track:{background:Q,cursor:"move-y",height:"100px"}}}),r.a.createElement("label",{className:"fader-label"},"S")),r.a.createElement("div",{className:"fader-container"},r.a.createElement(J,{axis:"y",y:t.release,ymin:.01,ymax:1,ystep:.01,onChange:function(e){var t=e.y;return a({release:t})},styles:{active:{background:"grey"},track:{background:Q,cursor:"move-y",height:"100px"}}}),r.a.createElement("label",{className:"fader-label"},"R")),r.a.createElement("div",{className:"fader-container"},r.a.createElement(J,{axis:"y",y:t.width,ymin:.1,ymax:1,ystep:.1,onChange:function(e){var t=e.y;return a({width:t})},styles:{active:{background:"grey"},track:{background:Q,cursor:"move-y",height:"100px"}}}),r.a.createElement("label",{className:"fader-label"},"W"))))),r.a.createElement("fieldset",{className:"form-col delay"},r.a.createElement("label",{className:"form-row",htmlFor:"delay_wet"},"Delay"),r.a.createElement("div",{className:"form-row"},r.a.createElement(J,{axis:"xy",x:t.delay_feedback,xmin:0,xmax:1,xstep:.01,y:t.delay_wet,ymin:0,ymax:1,ystep:.01,onChange:function(e){var t=e.x,n=e.y;return a({delay_feedback:t,delay_wet:n})},styles:{track:{background:Q,borderRadius:"4px",cursor:"move",height:"100px",width:"100%"}}}))),r.a.createElement("fieldset",{className:"form-col delay-time"},r.a.createElement("label",{className:"form-row",htmlFor:"delay_time"},"Delay Time"),r.a.createElement("div",{className:"form-row"},r.a.createElement($,{name:"delay_time",value:t.delay_time,onChange:function(e){return a({delay_time:e})},options:te}))),r.a.createElement("fieldset",{className:"form-col chorus"},r.a.createElement("label",{className:"form-row",htmlFor:"chorus_frequency"},"Chorus"),r.a.createElement("div",{className:"form-row"},r.a.createElement(J,{axis:"xy",x:t.chorus_frequency,xmin:0,xmax:20,xstep:.1,y:t.chorus_depth,ymin:0,ymax:1,ystep:.01,onChange:function(e){var t=e.x,n=e.y;return a({chorus_frequency:t,chorus_depth:n})},styles:{track:{background:Q,borderRadius:"4px",cursor:"move",height:"100px",width:"100%"}}}))))},ne=a(58),re=a(59),oe=a(141),ce={tempo:90,waveform:"sine",attack:.01,decay:.5,sustain:.1,release:.5,delay_wet:.5,delay_time:"4n",delay_feedback:.33,chorus_frequency:4,chorus_delay_time:1.5,chorus_depth:.25,width:.1},ie=[0,4,7],se=[0,3,7],le=[ie,se,se,ie,ie,se,[0,3,6]],ue=[0,2,4,5,7,9,11],me=function(e,t){return Math.floor(Math.random()*(t-e)+e)},de=function(e){function t(e){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(w.a)(this,t),(a=Object(C.a)(this,Object(S.a)(t).call(this))).generators=void 0,a.probabilities=void 0,a.pattern=void 0,a.current=void 0,a.range=void 0,a.synth=void 0,a.updateParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(E.a)({},a.params,{},e);oe.Transport.bpm.value=t.tempo,a.synth.update(t)},n=Object(E.a)({},ce,{},n),a.synth=new ve(n),a.current=0,a.range=2,a.pattern=new he(a.current,a.range),a.probabilities=[],a.generators=[],a.updateParams(n),a.updateProbabilities(e),oe.Transport.latencyHint="playback",oe.Transport.loop=!0,oe.Transport.loopStart=0,oe.Transport.loopEnd="1m",oe.Transport.scheduleRepeat((function(e){oe.Draw.schedule((function(){var e=a.next(a.current);a.emit("select",e,a.current),a.current=e}),e)}),"1:0:0","0:2:0"),oe.Transport.scheduleRepeat((function(e){oe.Draw.schedule((function(){a.pattern=new he(a.current,a.range),a.emit("change",a.pattern,a.current)}),e)}),"1:0:0","0:0:0"),oe.Transport.scheduleRepeat((function(e){oe.Draw.schedule((function(){var e=oe.Transport.position,t=parseInt(e.split(":")[1],10);a.emit("beat",t)}),e)}),"0:0:1","0:0:0"),oe.Transport.scheduleRepeat((function(e){var t=me(0,a.pattern.notes.length),n=a.pattern.notes[t];a.synth.trigger(n)}),"0:0:2","0:0:0"),a}return Object(D.a)(t,e),Object(x.a)(t,[{key:"updateProbabilities",value:function(e){this.probabilities=e,this.generators=e.map((function(e){return new ne.VoseAliasMethod(e)}))}},{key:"next",value:function(e){return this.generators[e].next()}},{key:"start",value:function(){"started"!==oe.Transport.state&&oe.Transport.start()}},{key:"stop",value:function(){oe.Transport.stop()}},{key:"toggle",value:function(){oe.Transport.toggle()}},{key:"params",get:function(){return{tempo:oe.Transport.bpm.value,waveform:this.synth.voice.get("oscillator").oscillator.type,attack:this.synth.voice.get("envelope").envelope.attack,decay:this.synth.voice.get("envelope").envelope.decay,sustain:this.synth.voice.get("envelope").envelope.sustain,release:this.synth.voice.get("envelope").envelope.release,delay_wet:this.synth.delay.wet.value,delay_time:oe.Time(this.synth.delay.delayTime.value).toNotation(),delay_feedback:this.synth.delay.feedback.value,chorus_frequency:this.synth.chorus.frequency.value,chorus_delay_time:this.synth.chorus.delayTime,chorus_depth:this.synth.chorus.depth,width:this.synth.width}}},{key:"state",get:function(){return oe.Transport.state}}]),t}(re.EventEmitter),he=function e(t,a){Object(w.a)(this,e),this.notes=void 0;var n=48+ue[t],r=le[t],o=new Array(a).fill(0).map((function(e,t){return t}));this.notes=N.a.flatten(o.map((function(e){return r.map((function(t){return n+t+12*e}))}))).map((function(e){return oe.Frequency(e,"midi").toNote()}))},ve=function(){function e(t){Object(w.a)(this,e),this.delay=void 0,this.chorus=void 0,this.voice=void 0,this.width=void 0,this.width=t.width,this.delay=new oe.PingPongDelay(t.delay_time,t.delay_feedback),this.delay.wet.value=t.delay_wet,this.chorus=new oe.Chorus(t.chorus_frequency,t.chorus_delay_time,t.chorus_depth),this.voice=new oe.PolySynth(4,oe.Synth,{oscillator:{type:t.waveform}}),this.voice.set({envelope:{attack:t.attack,decay:t.decay,sustain:t.sustain,release:t.release}}),this.voice.chain(this.chorus,this.delay,oe.Master)}return Object(x.a)(e,[{key:"update",value:function(e){this.width=e.width,this.voice.set({oscillator:{type:e.waveform},envelope:{attack:e.attack,decay:e.decay,sustain:e.sustain,release:e.release}}),this.delay.wet.value=e.delay_wet,this.delay.delayTime.value=e.delay_time,this.delay.feedback.value=e.delay_feedback,this.chorus.frequency.value=e.chorus_frequency,this.chorus.delayTime=e.chorus_delay_time,this.chorus.depth=e.chorus_depth}},{key:"trigger",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;this.voice.triggerAttackRelease(e,this.width,void 0,t)}}]),e}(),fe=a(15),ye=a(60),pe=a.n(ye),ge=38,be=40,Ee=function(e){var t,a=e.min,o=e.max,c=e.step,s=e.value,l=e.onChange,u=Object(h.a)(e,["min","max","step","value","onChange"]),m=function(e){return!isNaN(e)&&a<=e&&e<=o};if(!m(s))throw new Error('invalid value "'.concat(s,'"'));var d=pe()(l),v=Object(n.useState)(s),f=Object(i.a)(v,2),y=f[0],p=f[1];function g(e){m(e)?(p(e),d(e)):p(s)}var b=(t={},Object(fe.a)(t,be,(function(){var e=y-c;m(e)&&g(e)})),Object(fe.a)(t,ge,(function(){var e=y+c;m(e)&&g(e)})),t);return r.a.createElement("input",Object.assign({},u,{type:"text",inputMode:"numeric",pattern:"[0-9]*",onBlur:function(e){var t=e.target;g(parseInt(t.value,10))},onChange:function(e){var t=e.target;p(Number(t.value))},onKeyDown:function(e){var t=b[e.keyCode];t&&t()},value:y}))},we=["C","D","E","F","G","A","B"],xe=new de([[0,.09,.06,.3,.4,.15,0],[.18,0,.13,.22,.22,.25,0],[.06,.1,0,.41,.1,.33,0],[.38,.06,.04,0,.38,.14,0],[.27,.07,.05,.27,0,.34,0],[.16,.09,.09,.36,.3,0,0],[.16,.16,.16,.16,.16,.16,0]]);var ke=32,Ne=function(){var e=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),r=a[0],o=a[1],c=Object(n.useState)(0),s=Object(i.a)(c,2),l=s[0],u=s[1],m=Object(n.useState)(0),d=Object(i.a)(m,2),h=d[0],v=d[1],f=Object(n.useState)(void 0),y=Object(i.a)(f,2),p=y[0],g=y[1];return Object(n.useEffect)((function(){return e.on("select",(function(e,t){g(e)})).on("change",(function(e,t){g(void 0),v(t)})).on("beat",(function(e){u(e)})),function(){return e.stop()}}),[]),[l,h,p,r,function(e){o(e)}]}(xe),t=Object(i.a)(e,5),a=t[0],o=t[1],c=t[2],s=t[3],l=t[4];function u(){var e="started"===xe.state;l(!e),xe.toggle()}return Object(n.useEffect)((function(){function e(e){var t;if(null===(t=document.activeElement)||void 0===t||!t.classList.contains("PlayPauseButton"))return e.keyCode===ke?u():void 0}return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[]),r.a.createElement("div",{className:"SleepMachine-container"},r.a.createElement("header",{className:"SleepMachine-header"},r.a.createElement("h1",{className:"wordmark"},r.a.createElement("span",null,"Zzz Machine"),r.a.createElement("br",null),r.a.createElement("small",null,r.a.createElement("em",null,"by ",r.a.createElement("a",{href:"https://twitter.com/jordanstephens"},"@jordanstephens"))," \u2022 ",r.a.createElement("a",{href:"https://github.com/jordanstephens/sleep-machine"},"Source"))),r.a.createElement("div",{className:"transport-controls-container"},r.a.createElement("div",{className:"transport-controls"},r.a.createElement("div",{className:"ProgressMeter-container"},s&&r.a.createElement(d,{beat:a})),r.a.createElement(Ee,{id:"tempo",name:"tempo",min:60,max:180,step:1,value:Math.round(xe.params.tempo),onChange:function(e){return xe.updateParams({tempo:e})},className:"tempo-input"}),r.a.createElement("small",null,"bpm")))),r.a.createElement("main",{className:"App-main"},!s&&r.a.createElement("div",{className:"overlay"},r.a.createElement("div",{className:"start-message",onClick:u},r.a.createElement("div",{style:{marginBottom:"1rem",height:"3.5rem",width:"3.5rem"}},r.a.createElement(y,{playing:!1,onClick:function(){}})),"Play")),r.a.createElement("div",{className:"SleepMachine"},r.a.createElement("div",{className:"viz-container"},r.a.createElement("div",{className:"MarkovChart-container"},r.a.createElement(Y,{labels:we,current:o,next:c,weights:xe.probabilities,onChange:function(e){xe.updateProbabilities(e)}}))),r.a.createElement("div",{className:"Controls-container"},r.a.createElement(ae,{beat:a,params:xe.params,onChange:xe.updateParams})))))};var je=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(Ne,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(je,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},62:function(e,t,a){e.exports=a(146)},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.79229cb2.chunk.js.map